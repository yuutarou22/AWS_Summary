# DB選定

## 前提
- AWSのDBサービスは、全てマネージドサービスである。
  - マネージドサービスとは、DB管理のフルマネージド化されていること。
  - EC2にDB環境を構築する場合、OSパッチ適用以降を自分で行う必要があるが、DBサービスを利用する場合アプリケーション最適化に注力できる。
  - https://youtu.be/h1r8AzOdlqo?t=566


## リレーショナルDB
厳格なスキーマ設計が重要である。多対１であるのがリレーショナルDBの特徴である。


### RDS
リレーショナルDBのセットアップ、オペレーション、スケールが簡単である。

ハードのプロビジョニング、パッチ適用、バックアップなども自動化可能である。

Aurora,PostgreSQL、MySQL、MariaDB、OracleDB、SQLServerの6つから選べる。


### Aurora（補足）
Amazonが提供するクラウド向けDBのこと。

MySQL、PostgreSQLと互換性がある。


## NoSQLDB
RDBMSではないデータベースの総称である。

NoSQL自体は非常に多くの種類がある。

高いスケーラビリティを誇る。


### DynamoDB
選択指針：スケーラビリティが求められる。レスポンスタイム数ミリ秒が求められる。シンプルなクエリである。

KVS（Key Value Store）という単純な構造となっているため、低レイテンシ、高スループットのデータアクセスが可能である。

オンラインゲームデータ（アイテムステータスなど）、Eコマースのショッピングカートなどに利用されている。


### DocumentDB
ドキュメント指向DBである。
JSONやXMLなどで不定形なデータ構造に対応している。

複雑なデータモデリングに対応可能である。

選択指針：コンテンツ管理（ニュース記事、ブログ、レシピなど）、カタログ（製品情報、在庫の説明）、ユーザーの設定管理など


### ElasticCache
インメモリーDB→KVSになっており、最大限メモリで処理するため、短い応答時間を実現する。

データキャッシュやクエリキャッシュに利用される。

レイテンシがクリティカルとなってしまうようなアプリケーション（ゲームなど）に使われる。

RDBではマイクロ秒レベルのレイテンシの実現は難しいので、ElasticCacheを利用する。


### Neptune
グラフ指向DBである。多対多である。

数十億のリレーションシップを扱うことができ、ミリ秒台のレイテンシを実現している。

データ間を相互に結び付けて、データ同士の関係をグラフという形で管理する。

複雑なデータの関係性を管理するのに向いている（SNSサービスなど）。

選択指針：関連を探索するクエリ（トラバーサル）、短いクエリが大量に来る要件がある


### Timestream（Preview）
時系列DBである。

時間が唯一の主軸であり、特定の感覚で記録され続ける。

### QLDB（Preview）
